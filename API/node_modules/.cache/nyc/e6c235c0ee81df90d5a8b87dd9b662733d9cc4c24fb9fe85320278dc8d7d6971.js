"use strict";var cov_2my30pn0xx=function(){var path="/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/models/groupMember.js";var hash="3ba4c955aa91cfd4dca379e59d034b93354852c6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/models/groupMember.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:19},end:{line:5,column:80}},"2":{start:{line:7,column:25},end:{line:7,column:99}},"3":{start:{line:9,column:14},end:{line:9,column:55}},"4":{start:{line:11,column:12},end:{line:11,column:53}},"5":{start:{line:13,column:13},end:{line:13,column:55}},"6":{start:{line:15,column:17},end:{line:15,column:71}},"7":{start:{line:17,column:14},end:{line:17,column:66}},"8":{start:{line:19,column:18},end:{line:19,column:74}},"9":{start:{line:21,column:18},end:{line:208,column:2}},"10":{start:{line:26,column:4},end:{line:26,column:45}},"11":{start:{line:29,column:4},end:{line:29,column:47}},"12":{start:{line:32,column:19},end:{line:51,column:7}},"13":{start:{line:35,column:6},end:{line:50,column:24}},"14":{start:{line:36,column:8},end:{line:49,column:9}},"15":{start:{line:37,column:10},end:{line:48,column:11}},"16":{start:{line:39,column:14},end:{line:39,column:32}},"17":{start:{line:40,column:14},end:{line:40,column:36}},"18":{start:{line:43,column:14},end:{line:43,column:62}},"19":{start:{line:47,column:14},end:{line:47,column:37}},"20":{start:{line:54,column:6},end:{line:54,column:45}},"21":{start:{line:57,column:4},end:{line:57,column:19}},"22":{start:{line:61,column:18},end:{line:92,column:7}},"23":{start:{line:65,column:6},end:{line:91,column:25}},"24":{start:{line:66,column:8},end:{line:90,column:9}},"25":{start:{line:67,column:10},end:{line:89,column:11}},"26":{start:{line:69,column:14},end:{line:69,column:92}},"27":{start:{line:70,column:14},end:{line:70,column:33}},"28":{start:{line:71,column:14},end:{line:71,column:47}},"29":{start:{line:74,column:14},end:{line:74,column:42}},"30":{start:{line:75,column:14},end:{line:75,column:33}},"31":{start:{line:76,column:14},end:{line:80,column:17}},"32":{start:{line:83,column:14},end:{line:83,column:42}},"33":{start:{line:84,column:14},end:{line:84,column:69}},"34":{start:{line:88,column:14},end:{line:88,column:38}},"35":{start:{line:95,column:6},end:{line:95,column:44}},"36":{start:{line:98,column:4},end:{line:98,column:18}},"37":{start:{line:101,column:28},end:{line:156,column:7}},"38":{start:{line:105,column:6},end:{line:155,column:25}},"39":{start:{line:106,column:8},end:{line:154,column:9}},"40":{start:{line:107,column:10},end:{line:153,column:11}},"41":{start:{line:109,column:14},end:{line:109,column:33}},"42":{start:{line:110,column:14},end:{line:144,column:19}},"43":{start:{line:118,column:27},end:{line:139,column:19}},"44":{start:{line:121,column:18},end:{line:138,column:31}},"45":{start:{line:122,column:20},end:{line:137,column:21}},"46":{start:{line:123,column:22},end:{line:136,column:23}},"47":{start:{line:125,column:26},end:{line:125,column:45}},"48":{start:{line:126,column:26},end:{line:128,column:30}},"49":{start:{line:127,column:28},end:{line:127,column:66}},"50":{start:{line:131,column:26},end:{line:131,column:68}},"51":{start:{line:135,column:26},end:{line:135,column:50}},"52":{start:{line:141,column:16},end:{line:143,column:18}},"53":{start:{line:142,column:18},end:{line:142,column:53}},"54":{start:{line:147,column:14},end:{line:147,column:43}},"55":{start:{line:148,column:14},end:{line:148,column:70}},"56":{start:{line:152,column:14},end:{line:152,column:38}},"57":{start:{line:159,column:6},end:{line:159,column:54}},"58":{start:{line:162,column:4},end:{line:162,column:28}},"59":{start:{line:165,column:19},end:{line:200,column:7}},"60":{start:{line:169,column:6},end:{line:199,column:35}},"61":{start:{line:170,column:8},end:{line:198,column:9}},"62":{start:{line:171,column:10},end:{line:197,column:11}},"63":{start:{line:173,column:14},end:{line:173,column:33}},"64":{start:{line:174,column:14},end:{line:174,column:33}},"65":{start:{line:175,column:14},end:{line:179,column:17}},"66":{start:{line:182,column:14},end:{line:182,column:39}},"67":{start:{line:183,column:14},end:{line:183,column:33}},"68":{start:{line:184,column:14},end:{line:184,column:20}},"69":{start:{line:187,column:14},end:{line:187,column:33}},"70":{start:{line:188,column:14},end:{line:188,column:51}},"71":{start:{line:189,column:14},end:{line:189,column:55}},"72":{start:{line:192,column:14},end:{line:192,column:54}},"73":{start:{line:196,column:14},end:{line:196,column:38}},"74":{start:{line:203,column:6},end:{line:203,column:45}},"75":{start:{line:206,column:4},end:{line:206,column:19}},"76":{start:{line:210,column:0},end:{line:210,column:73}}},fnMap:{"0":{name:"user",decl:{start:{line:25,column:17},end:{line:25,column:21}},loc:{start:{line:25,column:24},end:{line:27,column:3}},line:25},"1":{name:"group",decl:{start:{line:28,column:18},end:{line:28,column:23}},loc:{start:{line:28,column:26},end:{line:30,column:3}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:12},end:{line:31,column:13}},loc:{start:{line:31,column:24},end:{line:58,column:3}},line:31},"3":{name:"_callee",decl:{start:{line:34,column:42},end:{line:34,column:49}},loc:{start:{line:34,column:52},end:{line:51,column:5}},line:34},"4":{name:"_callee$",decl:{start:{line:35,column:51},end:{line:35,column:59}},loc:{start:{line:35,column:70},end:{line:50,column:7}},line:35},"5":{name:"_delete",decl:{start:{line:53,column:13},end:{line:53,column:20}},loc:{start:{line:53,column:23},end:{line:55,column:5}},line:53},"6":{name:"(anonymous_6)",decl:{start:{line:60,column:10},end:{line:60,column:11}},loc:{start:{line:60,column:22},end:{line:99,column:3}},line:60},"7":{name:"_callee2",decl:{start:{line:63,column:42},end:{line:63,column:50}},loc:{start:{line:63,column:57},end:{line:92,column:5}},line:63},"8":{name:"_callee2$",decl:{start:{line:65,column:51},end:{line:65,column:60}},loc:{start:{line:65,column:72},end:{line:91,column:7}},line:65},"9":{name:"create",decl:{start:{line:94,column:13},end:{line:94,column:19}},loc:{start:{line:94,column:24},end:{line:96,column:5}},line:94},"10":{name:"(anonymous_10)",decl:{start:{line:100,column:20},end:{line:100,column:21}},loc:{start:{line:100,column:32},end:{line:163,column:3}},line:100},"11":{name:"_callee4",decl:{start:{line:103,column:42},end:{line:103,column:50}},loc:{start:{line:103,column:60},end:{line:156,column:5}},line:103},"12":{name:"_callee4$",decl:{start:{line:105,column:51},end:{line:105,column:60}},loc:{start:{line:105,column:72},end:{line:155,column:7}},line:105},"13":{name:"(anonymous_13)",decl:{start:{line:117,column:14},end:{line:117,column:15}},loc:{start:{line:117,column:26},end:{line:144,column:15}},line:117},"14":{name:"_callee3",decl:{start:{line:120,column:54},end:{line:120,column:62}},loc:{start:{line:120,column:71},end:{line:139,column:17}},line:120},"15":{name:"_callee3$",decl:{start:{line:121,column:63},end:{line:121,column:72}},loc:{start:{line:121,column:84},end:{line:138,column:19}},line:121},"16":{name:"(anonymous_16)",decl:{start:{line:126,column:56},end:{line:126,column:57}},loc:{start:{line:126,column:73},end:{line:128,column:27}},line:126},"17":{name:"(anonymous_17)",decl:{start:{line:141,column:23},end:{line:141,column:24}},loc:{start:{line:141,column:38},end:{line:143,column:17}},line:141},"18":{name:"getPendingByUser",decl:{start:{line:158,column:13},end:{line:158,column:29}},loc:{start:{line:158,column:35},end:{line:160,column:5}},line:158},"19":{name:"(anonymous_19)",decl:{start:{line:164,column:12},end:{line:164,column:13}},loc:{start:{line:164,column:24},end:{line:207,column:3}},line:164},"20":{name:"_callee5",decl:{start:{line:167,column:42},end:{line:167,column:50}},loc:{start:{line:167,column:55},end:{line:200,column:5}},line:167},"21":{name:"_callee5$",decl:{start:{line:169,column:51},end:{line:169,column:60}},loc:{start:{line:169,column:72},end:{line:199,column:7}},line:169},"22":{name:"_delete",decl:{start:{line:202,column:13},end:{line:202,column:20}},loc:{start:{line:202,column:26},end:{line:204,column:5}},line:202}},branchMap:{"0":{loc:{start:{line:37,column:10},end:{line:48,column:11}},type:"switch",locations:[{start:{line:38,column:12},end:{line:40,column:36}},{start:{line:42,column:12},end:{line:43,column:62}},{start:{line:45,column:12},end:{line:45,column:19}},{start:{line:46,column:12},end:{line:47,column:37}}],line:37},"1":{loc:{start:{line:67,column:10},end:{line:89,column:11}},type:"switch",locations:[{start:{line:68,column:12},end:{line:71,column:47}},{start:{line:73,column:12},end:{line:80,column:17}},{start:{line:82,column:12},end:{line:84,column:69}},{start:{line:86,column:12},end:{line:86,column:19}},{start:{line:87,column:12},end:{line:88,column:38}}],line:67},"2":{loc:{start:{line:107,column:10},end:{line:153,column:11}},type:"switch",locations:[{start:{line:108,column:12},end:{line:144,column:19}},{start:{line:146,column:12},end:{line:148,column:70}},{start:{line:150,column:12},end:{line:150,column:19}},{start:{line:151,column:12},end:{line:152,column:38}}],line:107},"3":{loc:{start:{line:123,column:22},end:{line:136,column:23}},type:"switch",locations:[{start:{line:124,column:24},end:{line:128,column:30}},{start:{line:130,column:24},end:{line:131,column:68}},{start:{line:133,column:24},end:{line:133,column:31}},{start:{line:134,column:24},end:{line:135,column:50}}],line:123},"4":{loc:{start:{line:171,column:10},end:{line:197,column:11}},type:"switch",locations:[{start:{line:172,column:12},end:{line:179,column:17}},{start:{line:181,column:12},end:{line:184,column:20}},{start:{line:186,column:12},end:{line:189,column:55}},{start:{line:191,column:12},end:{line:192,column:54}},{start:{line:194,column:12},end:{line:194,column:20}},{start:{line:195,column:12},end:{line:196,column:38}}],line:171}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},b:{"0":[0,0,0,0],"1":[0,0,0,0,0],"2":[0,0,0,0],"3":[0,0,0,0],"4":[0,0,0,0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"3ba4c955aa91cfd4dca379e59d034b93354852c6"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_2my30pn0xx.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));var _regenerator=(cov_2my30pn0xx.s[1]++,_interopRequireDefault(require("@babel/runtime/regenerator")));var _asyncToGenerator2=(cov_2my30pn0xx.s[2]++,_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")));var _lodash=(cov_2my30pn0xx.s[3]++,_interopRequireDefault(require("lodash")));var _user=(cov_2my30pn0xx.s[4]++,_interopRequireDefault(require("./user")));var _group=(cov_2my30pn0xx.s[5]++,_interopRequireDefault(require("./group")));var _bookshelf=(cov_2my30pn0xx.s[6]++,_interopRequireDefault(require("../config/bookshelf")));var _errors=(cov_2my30pn0xx.s[7]++,_interopRequireDefault(require("../helpers/errors")));var _formatters=(cov_2my30pn0xx.s[8]++,_interopRequireDefault(require("../helpers/formatters")));var GroupMember=(cov_2my30pn0xx.s[9]++,_bookshelf["default"].Model.extend({tableName:'group_members',idAttribute:'id',hidden:[],user:function user(){cov_2my30pn0xx.f[0]++;cov_2my30pn0xx.s[10]++;return this.belongsTo('User','user_id');},group:function group(){cov_2my30pn0xx.f[1]++;cov_2my30pn0xx.s[11]++;return this.belongsTo('Group','group_id');},"delete":function(){cov_2my30pn0xx.f[2]++;var _delete2=(cov_2my30pn0xx.s[12]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){cov_2my30pn0xx.f[3]++;cov_2my30pn0xx.s[13]++;return _regenerator["default"].wrap(function _callee$(_context){cov_2my30pn0xx.f[4]++;cov_2my30pn0xx.s[14]++;while(1){cov_2my30pn0xx.s[15]++;switch(_context.prev=_context.next){case 0:cov_2my30pn0xx.b[0][0]++;cov_2my30pn0xx.s[16]++;_context.next=2;cov_2my30pn0xx.s[17]++;return this.destroy();case 2:cov_2my30pn0xx.b[0][1]++;cov_2my30pn0xx.s[18]++;return _context.abrupt("return",_context.sent);case 3:cov_2my30pn0xx.b[0][2]++;case"end":cov_2my30pn0xx.b[0][3]++;cov_2my30pn0xx.s[19]++;return _context.stop();}}},_callee,this);})));function _delete(){cov_2my30pn0xx.f[5]++;cov_2my30pn0xx.s[20]++;return _delete2.apply(this,arguments);}cov_2my30pn0xx.s[21]++;return _delete;}()},{create:function(){cov_2my30pn0xx.f[6]++;var _create=(cov_2my30pn0xx.s[22]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(body){cov_2my30pn0xx.f[7]++;var realbody,e,invitation;cov_2my30pn0xx.s[23]++;return _regenerator["default"].wrap(function _callee2$(_context2){cov_2my30pn0xx.f[8]++;cov_2my30pn0xx.s[24]++;while(1){cov_2my30pn0xx.s[25]++;switch(_context2.prev=_context2.next){case 0:cov_2my30pn0xx.b[1][0]++;cov_2my30pn0xx.s[26]++;realbody=_lodash["default"].pick(body,['group_id','user_id','accepted']);cov_2my30pn0xx.s[27]++;_context2.next=3;cov_2my30pn0xx.s[28]++;return new this(realbody).save();case 3:cov_2my30pn0xx.b[1][1]++;cov_2my30pn0xx.s[29]++;e=_context2.sent.toJSON();cov_2my30pn0xx.s[30]++;_context2.next=6;cov_2my30pn0xx.s[31]++;return this.where({id:e.id}).fetch({withRelated:['user','user.role']});case 6:cov_2my30pn0xx.b[1][2]++;cov_2my30pn0xx.s[32]++;invitation=_context2.sent;cov_2my30pn0xx.s[33]++;return _context2.abrupt("return",invitation.toJSON());case 8:cov_2my30pn0xx.b[1][3]++;case"end":cov_2my30pn0xx.b[1][4]++;cov_2my30pn0xx.s[34]++;return _context2.stop();}}},_callee2,this);})));function create(_x){cov_2my30pn0xx.f[9]++;cov_2my30pn0xx.s[35]++;return _create.apply(this,arguments);}cov_2my30pn0xx.s[36]++;return create;}(),getPendingByUser:function(){cov_2my30pn0xx.f[10]++;var _getPendingByUser=(cov_2my30pn0xx.s[37]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee4(user_id){cov_2my30pn0xx.f[11]++;var invitations;cov_2my30pn0xx.s[38]++;return _regenerator["default"].wrap(function _callee4$(_context4){cov_2my30pn0xx.f[12]++;cov_2my30pn0xx.s[39]++;while(1){cov_2my30pn0xx.s[40]++;switch(_context4.prev=_context4.next){case 0:cov_2my30pn0xx.b[2][0]++;cov_2my30pn0xx.s[41]++;_context4.next=2;cov_2my30pn0xx.s[42]++;return this.where({user_id:user_id,accepted:null})//    .fetchAll({withRealted: ['group']});
.fetchAll()// BUG : withRelated is not fetching groups, need to do it manually
.then(/*#__PURE__*/function(){cov_2my30pn0xx.f[13]++;var _ref=(cov_2my30pn0xx.s[43]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee3(invits){cov_2my30pn0xx.f[14]++;cov_2my30pn0xx.s[44]++;return _regenerator["default"].wrap(function _callee3$(_context3){cov_2my30pn0xx.f[15]++;cov_2my30pn0xx.s[45]++;while(1){cov_2my30pn0xx.s[46]++;switch(_context3.prev=_context3.next){case 0:cov_2my30pn0xx.b[3][0]++;cov_2my30pn0xx.s[47]++;_context3.next=2;cov_2my30pn0xx.s[48]++;return Promise.all(invits.map(function(invit){cov_2my30pn0xx.f[16]++;cov_2my30pn0xx.s[49]++;return invit.related('group').fetch();}));case 2:cov_2my30pn0xx.b[3][1]++;cov_2my30pn0xx.s[50]++;return _context3.abrupt("return",invits);case 3:cov_2my30pn0xx.b[3][2]++;case"end":cov_2my30pn0xx.b[3][3]++;cov_2my30pn0xx.s[51]++;return _context3.stop();}}},_callee3);})));cov_2my30pn0xx.s[52]++;return function(_x3){cov_2my30pn0xx.f[17]++;cov_2my30pn0xx.s[53]++;return _ref.apply(this,arguments);};}());case 2:cov_2my30pn0xx.b[2][1]++;cov_2my30pn0xx.s[54]++;invitations=_context4.sent;cov_2my30pn0xx.s[55]++;return _context4.abrupt("return",invitations.toJSON());case 4:cov_2my30pn0xx.b[2][2]++;case"end":cov_2my30pn0xx.b[2][3]++;cov_2my30pn0xx.s[56]++;return _context4.stop();}}},_callee4,this);})));function getPendingByUser(_x2){cov_2my30pn0xx.f[18]++;cov_2my30pn0xx.s[57]++;return _getPendingByUser.apply(this,arguments);}cov_2my30pn0xx.s[58]++;return getPendingByUser;}(),"delete":function(){cov_2my30pn0xx.f[19]++;var _delete3=(cov_2my30pn0xx.s[59]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee5(id){cov_2my30pn0xx.f[20]++;var destroy;cov_2my30pn0xx.s[60]++;return _regenerator["default"].wrap(function _callee5$(_context5){cov_2my30pn0xx.f[21]++;cov_2my30pn0xx.s[61]++;while(1){cov_2my30pn0xx.s[62]++;switch(_context5.prev=_context5.next){case 0:cov_2my30pn0xx.b[4][0]++;cov_2my30pn0xx.s[63]++;_context5.prev=0;cov_2my30pn0xx.s[64]++;_context5.next=3;cov_2my30pn0xx.s[65]++;return new this({id:id}).destroy({require:true});case 3:cov_2my30pn0xx.b[4][1]++;cov_2my30pn0xx.s[66]++;destroy=_context5.sent;cov_2my30pn0xx.s[67]++;_context5.next=9;cov_2my30pn0xx.s[68]++;break;case 6:cov_2my30pn0xx.b[4][2]++;cov_2my30pn0xx.s[69]++;_context5.prev=6;cov_2my30pn0xx.s[70]++;_context5.t0=_context5["catch"](0);cov_2my30pn0xx.s[71]++;return _context5.abrupt("return",false);case 9:cov_2my30pn0xx.b[4][3]++;cov_2my30pn0xx.s[72]++;return _context5.abrupt("return",true);case 10:cov_2my30pn0xx.b[4][4]++;case"end":cov_2my30pn0xx.b[4][5]++;cov_2my30pn0xx.s[73]++;return _context5.stop();}}},_callee5,this,[[0,6]]);})));function _delete(_x4){cov_2my30pn0xx.f[22]++;cov_2my30pn0xx.s[74]++;return _delete3.apply(this,arguments);}cov_2my30pn0xx.s[75]++;return _delete;}()}));cov_2my30pn0xx.s[76]++;module.exports=_bookshelf["default"].model('GroupMember',GroupMember);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3VwTWVtYmVyLmpzIl0sIm5hbWVzIjpbIkdyb3VwTWVtYmVyIiwiQm9va3NoZWxmIiwiTW9kZWwiLCJleHRlbmQiLCJ0YWJsZU5hbWUiLCJpZEF0dHJpYnV0ZSIsImhpZGRlbiIsInVzZXIiLCJiZWxvbmdzVG8iLCJncm91cCIsImRlc3Ryb3kiLCJjcmVhdGUiLCJib2R5IiwicmVhbGJvZHkiLCJfIiwicGljayIsInNhdmUiLCJlIiwidG9KU09OIiwid2hlcmUiLCJpZCIsImZldGNoIiwid2l0aFJlbGF0ZWQiLCJpbnZpdGF0aW9uIiwiZ2V0UGVuZGluZ0J5VXNlciIsInVzZXJfaWQiLCJhY2NlcHRlZCIsImZldGNoQWxsIiwidGhlbiIsImludml0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpbnZpdCIsInJlbGF0ZWQiLCJpbnZpdGF0aW9ucyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBSUEsV0FBVyxHQUFHQyxzQkFBVUMsS0FBVixDQUFnQkMsTUFBaEIsQ0FBdUI7QUFDckNDLEVBQUFBLFNBQVMsRUFBRSxlQUQwQjtBQUVyQ0MsRUFBQUEsV0FBVyxFQUFFLElBRndCO0FBR3JDQyxFQUFBQSxNQUFNLEVBQUUsRUFINkI7QUFLckNDLEVBQUFBLElBTHFDLGtCQUs5QjtBQUNILFdBQU8sS0FBS0MsU0FBTCxDQUFlLE1BQWYsRUFBdUIsU0FBdkIsQ0FBUDtBQUNILEdBUG9DO0FBU3JDQyxFQUFBQSxLQVRxQyxtQkFTN0I7QUFDSixXQUFPLEtBQUtELFNBQUwsQ0FBZSxPQUFmLEVBQXdCLFVBQXhCLENBQVA7QUFDSCxHQVhvQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQWNwQixLQUFLRSxPQUFMLEVBZG9COztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxDQUF2QixFQWdCZjtBQUNPQyxFQUFBQSxNQURQO0FBQUE7QUFBQTtBQUFBLG1EQUNjQyxJQURkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVXQyxjQUFBQSxRQUZYLEdBRXNCQyxtQkFBRUMsSUFBRixDQUFPSCxJQUFQLEVBQWEsQ0FBQyxVQUFELEVBQWEsU0FBYixFQUF3QixVQUF4QixDQUFiLENBRnRCO0FBQUE7QUFBQSxxQkFHc0IsSUFBSSxJQUFKLENBQVNDLFFBQVQsRUFBbUJHLElBQW5CLEVBSHRCOztBQUFBO0FBR1dDLGNBQUFBLENBSFgsa0JBR2lEQyxNQUhqRDtBQUFBO0FBQUEscUJBSThCLEtBQUtDLEtBQUwsQ0FBVztBQUFDQyxnQkFBQUEsRUFBRSxFQUFFSCxDQUFDLENBQUNHO0FBQVAsZUFBWCxFQUF1QkMsS0FBdkIsQ0FBNkI7QUFBQ0MsZ0JBQUFBLFdBQVcsRUFBRSxDQUFDLE1BQUQsRUFBUyxXQUFUO0FBQWQsZUFBN0IsQ0FKOUI7O0FBQUE7QUFJV0MsY0FBQUEsVUFKWDtBQUFBLGdEQU1ZQSxVQUFVLENBQUNMLE1BQVgsRUFOWjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQVNPTSxFQUFBQSxnQkFUUDtBQUFBO0FBQUE7QUFBQSxtREFTd0JDLE9BVHhCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBVStCLEtBQ25CTixLQURtQixDQUNiO0FBQUNNLGdCQUFBQSxPQUFPLEVBQVBBLE9BQUQ7QUFBVUMsZ0JBQUFBLFFBQVEsRUFBRTtBQUFwQixlQURhLEVBRTFCO0FBRjBCLGVBR25CQyxRQUhtQixHQUdSO0FBSFEsZUFJbkJDLElBSm1CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSw2Q0FJZCxrQkFBTUMsTUFBTjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQ0FDSUMsT0FBTyxDQUFDQyxHQUFSLENBQVlGLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLFVBQUFDLEtBQUs7QUFBQSxtQ0FBSUEsS0FBSyxDQUFDQyxPQUFOLENBQWMsT0FBZCxFQUF1QmIsS0FBdkIsRUFBSjtBQUFBLDJCQUFoQixDQUFaLENBREo7O0FBQUE7QUFBQSw0REFFS1EsTUFGTDs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFKYzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxrQkFWL0I7O0FBQUE7QUFVV00sY0FBQUEsV0FWWDtBQUFBLGdEQW1CWUEsV0FBVyxDQUFDakIsTUFBWixFQW5CWjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLG1EQXNCY0UsRUF0QmQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQXdCNkIsSUFBSSxJQUFKLENBQVM7QUFBQ0EsZ0JBQUFBLEVBQUUsRUFBRkE7QUFBRCxlQUFULEVBQWVWLE9BQWYsQ0FBdUI7QUFBQzBCLGdCQUFBQSxPQUFPLEVBQUU7QUFBVixlQUF2QixDQXhCN0I7O0FBQUE7QUF3QmExQixjQUFBQSxPQXhCYjtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUEsZ0RBMEJnQixLQTFCaEI7O0FBQUE7QUFBQSxnREE0QlksSUE1Qlo7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxDQWhCZSxDQUFsQjs7QUFnREEyQixNQUFNLENBQUNDLE9BQVAsR0FBaUJyQyxzQkFBVXNDLEtBQVYsQ0FBZ0IsYUFBaEIsRUFBK0J2QyxXQUEvQixDQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS9lcndhbi9EZXNrdG9wL0VUTkEvTU9CSS9tb2JpX2FwcGxpL0FQSS9zcmMvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gICAgICAgICBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFVzZXIgICAgICBmcm9tICcuL3VzZXInO1xuaW1wb3J0IEdyb3VwICAgICBmcm9tICcuL2dyb3VwJztcbmltcG9ydCBCb29rc2hlbGYgZnJvbSAnLi4vY29uZmlnL2Jvb2tzaGVsZic7XG5pbXBvcnQgZXJyb3JzICAgIGZyb20gJy4uL2hlbHBlcnMvZXJyb3JzJztcbmltcG9ydCBmbXQgICAgICAgZnJvbSAnLi4vaGVscGVycy9mb3JtYXR0ZXJzJztcblxudmFyIEdyb3VwTWVtYmVyID0gQm9va3NoZWxmLk1vZGVsLmV4dGVuZCh7XG4gICAgdGFibGVOYW1lOiAnZ3JvdXBfbWVtYmVycycsXG4gICAgaWRBdHRyaWJ1dGU6ICdpZCcsXG4gICAgaGlkZGVuOiBbXSxcblxuICAgIHVzZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJlbG9uZ3NUbygnVXNlcicsICd1c2VyX2lkJyk7XG4gICAgfSxcblxuICAgIGdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZWxvbmdzVG8oJ0dyb3VwJywgJ2dyb3VwX2lkJyk7XG4gICAgfSxcblxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGVzdHJveSgpO1xuICAgIH1cbn0sIHtcbiAgICBhc3luYyBjcmVhdGUoYm9keSkge1xuICAgICAgICBjb25zdCByZWFsYm9keSA9IF8ucGljayhib2R5LCBbJ2dyb3VwX2lkJywgJ3VzZXJfaWQnLCAnYWNjZXB0ZWQnXSk7XG4gICAgICAgIGNvbnN0IGUgPSAoYXdhaXQgbmV3IHRoaXMocmVhbGJvZHkpLnNhdmUoKSkudG9KU09OKCk7XG4gICAgICAgIGNvbnN0IGludml0YXRpb24gPSBhd2FpdCB0aGlzLndoZXJlKHtpZDogZS5pZH0pLmZldGNoKHt3aXRoUmVsYXRlZDogWyd1c2VyJywgJ3VzZXIucm9sZSddfSk7XG5cbiAgICAgICAgcmV0dXJuIGludml0YXRpb24udG9KU09OKCk7XG4gICAgfSxcblxuICAgIGFzeW5jIGdldFBlbmRpbmdCeVVzZXIodXNlcl9pZCkge1xuICAgICAgICBjb25zdCBpbnZpdGF0aW9ucyA9IGF3YWl0IHRoaXNcbiAgICAgICAgICAgICAgLndoZXJlKHt1c2VyX2lkLCBhY2NlcHRlZDogbnVsbH0pXG4gICAgICAgIC8vICAgIC5mZXRjaEFsbCh7d2l0aFJlYWx0ZWQ6IFsnZ3JvdXAnXX0pO1xuICAgICAgICAgICAgICAuZmV0Y2hBbGwoKSAvLyBCVUcgOiB3aXRoUmVsYXRlZCBpcyBub3QgZmV0Y2hpbmcgZ3JvdXBzLCBuZWVkIHRvIGRvIGl0IG1hbnVhbGx5XG4gICAgICAgICAgICAgIC50aGVuKGFzeW5jIGludml0cyA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChpbnZpdHMubWFwKGludml0ID0+IGludml0LnJlbGF0ZWQoJ2dyb3VwJykuZmV0Y2goKSkpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGludml0cztcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGludml0YXRpb25zLnRvSlNPTigpO1xuICAgIH0sXG5cbiAgICBhc3luYyBkZWxldGUoaWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBkZXN0cm95ID0gYXdhaXQgbmV3IHRoaXMoe2lkfSkuZGVzdHJveSh7cmVxdWlyZTogdHJ1ZX0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQm9va3NoZWxmLm1vZGVsKCdHcm91cE1lbWJlcicsIEdyb3VwTWVtYmVyKTtcbiJdfQ==