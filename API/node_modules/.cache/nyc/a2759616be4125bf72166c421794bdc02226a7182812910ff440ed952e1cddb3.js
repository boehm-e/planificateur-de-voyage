"use strict";var cov_1hyuj2thh4=function(){var path="/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/config/express-app.js";var hash="46f883cddf264680f54f5376c760bc4e3d42202c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/config/express-app.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:19},end:{line:10,column:80}},"4":{start:{line:12,column:25},end:{line:12,column:99}},"5":{start:{line:14,column:15},end:{line:14,column:57}},"6":{start:{line:16,column:16},end:{line:16,column:59}},"7":{start:{line:18,column:19},end:{line:18,column:66}},"8":{start:{line:20,column:18},end:{line:20,column:64}},"9":{start:{line:22,column:14},end:{line:22,column:55}},"10":{start:{line:24,column:20},end:{line:24,column:68}},"11":{start:{line:26,column:12},end:{line:26,column:51}},"12":{start:{line:28,column:16},end:{line:28,column:61}},"13":{start:{line:30,column:12},end:{line:30,column:61}},"14":{start:{line:32,column:10},end:{line:32,column:36}},"15":{start:{line:34,column:18},end:{line:34,column:33}},"16":{start:{line:36,column:25},end:{line:46,column:1}},"17":{start:{line:37,column:14},end:{line:37,column:18}},"18":{start:{line:39,column:2},end:{line:43,column:3}},"19":{start:{line:40,column:4},end:{line:40,column:63}},"20":{start:{line:41,column:9},end:{line:43,column:3}},"21":{start:{line:42,column:4},end:{line:42,column:31}},"22":{start:{line:45,column:2},end:{line:45,column:15}},"23":{start:{line:48,column:18},end:{line:48,column:50}},"24":{start:{line:49,column:11},end:{line:53,column:1}},"25":{start:{line:54,column:0},end:{line:54,column:40}},"26":{start:{line:55,column:0},end:{line:55,column:41}},"27":{start:{line:56,column:0},end:{line:59,column:4}},"28":{start:{line:60,column:0},end:{line:63,column:4}},"29":{start:{line:65,column:0},end:{line:65,column:43}},"30":{start:{line:67,column:0},end:{line:106,column:6}},"31":{start:{line:70,column:13},end:{line:101,column:5}},"32":{start:{line:74,column:4},end:{line:100,column:32}},"33":{start:{line:75,column:6},end:{line:99,column:7}},"34":{start:{line:76,column:8},end:{line:98,column:9}},"35":{start:{line:78,column:12},end:{line:78,column:30}},"36":{start:{line:79,column:12},end:{line:79,column:30}},"37":{start:{line:80,column:12},end:{line:80,column:60}},"38":{start:{line:83,column:12},end:{line:83,column:33}},"39":{start:{line:84,column:12},end:{line:84,column:29}},"40":{start:{line:85,column:12},end:{line:85,column:31}},"41":{start:{line:86,column:12},end:{line:86,column:18}},"42":{start:{line:89,column:12},end:{line:89,column:30}},"43":{start:{line:90,column:12},end:{line:90,column:47}},"44":{start:{line:91,column:12},end:{line:93,column:15}},"45":{start:{line:97,column:12},end:{line:97,column:35}},"46":{start:{line:103,column:2},end:{line:105,column:4}},"47":{start:{line:104,column:4},end:{line:104,column:39}},"48":{start:{line:108,column:0},end:{line:114,column:3}},"49":{start:{line:109,column:2},end:{line:109,column:55}},"50":{start:{line:110,column:2},end:{line:110,column:64}},"51":{start:{line:111,column:2},end:{line:111,column:68}},"52":{start:{line:112,column:2},end:{line:112,column:111}},"53":{start:{line:113,column:2},end:{line:113,column:9}},"54":{start:{line:115,column:15},end:{line:115,column:18}},"55":{start:{line:116,column:0},end:{line:116,column:30}}},fnMap:{"0":{name:"customJWTExtractor",decl:{start:{line:36,column:34},end:{line:36,column:52}},loc:{start:{line:36,column:58},end:{line:46,column:1}},line:36},"1":{name:"(anonymous_1)",decl:{start:{line:69,column:0},end:{line:69,column:1}},loc:{start:{line:69,column:12},end:{line:106,column:1}},line:69},"2":{name:"_callee",decl:{start:{line:72,column:40},end:{line:72,column:47}},loc:{start:{line:72,column:67},end:{line:101,column:3}},line:72},"3":{name:"_callee$",decl:{start:{line:74,column:49},end:{line:74,column:57}},loc:{start:{line:74,column:68},end:{line:100,column:5}},line:74},"4":{name:"(anonymous_4)",decl:{start:{line:103,column:9},end:{line:103,column:10}},loc:{start:{line:103,column:28},end:{line:105,column:3}},line:103},"5":{name:"(anonymous_5)",decl:{start:{line:108,column:8},end:{line:108,column:9}},loc:{start:{line:108,column:34},end:{line:114,column:1}},line:108}},branchMap:{"0":{loc:{start:{line:39,column:2},end:{line:43,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:43,column:3}},{start:{line:39,column:2},end:{line:43,column:3}}],line:39},"1":{loc:{start:{line:41,column:9},end:{line:43,column:3}},type:"if",locations:[{start:{line:41,column:9},end:{line:43,column:3}},{start:{line:41,column:9},end:{line:43,column:3}}],line:41},"2":{loc:{start:{line:76,column:8},end:{line:98,column:9}},type:"switch",locations:[{start:{line:77,column:10},end:{line:80,column:60}},{start:{line:82,column:10},end:{line:86,column:18}},{start:{line:88,column:10},end:{line:93,column:15}},{start:{line:95,column:10},end:{line:95,column:18}},{start:{line:96,column:10},end:{line:97,column:35}}],line:76}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"46f883cddf264680f54f5376c760bc4e3d42202c"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_1hyuj2thh4.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_1hyuj2thh4.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1hyuj2thh4.s[2]++;exports["default"]=void 0;var _regenerator=(cov_1hyuj2thh4.s[3]++,_interopRequireDefault(require("@babel/runtime/regenerator")));var _asyncToGenerator2=(cov_1hyuj2thh4.s[4]++,_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")));var _express=(cov_1hyuj2thh4.s[5]++,_interopRequireDefault(require("express")));var _passport=(cov_1hyuj2thh4.s[6]++,_interopRequireDefault(require("passport")));var _passportJwt=(cov_1hyuj2thh4.s[7]++,_interopRequireDefault(require("passport-jwt")));var _bodyParser=(cov_1hyuj2thh4.s[8]++,_interopRequireDefault(require("body-parser")));var _morgan=(cov_1hyuj2thh4.s[9]++,_interopRequireDefault(require("morgan")));var _cookieParser=(cov_1hyuj2thh4.s[10]++,_interopRequireDefault(require("cookie-parser")));var _path=(cov_1hyuj2thh4.s[11]++,_interopRequireDefault(require("path")));var _security=(cov_1hyuj2thh4.s[12]++,_interopRequireDefault(require("./security")));var _user=(cov_1hyuj2thh4.s[13]++,_interopRequireDefault(require("../models/user")));var app=(cov_1hyuj2thh4.s[14]++,(0,_express["default"])());// Extract JWT from header OR cookie
var AUTH_HEADER=(cov_1hyuj2thh4.s[15]++,'authorization');cov_1hyuj2thh4.s[16]++;var customJWTExtractor=function customJWTExtractor(req){cov_1hyuj2thh4.f[0]++;var token=(cov_1hyuj2thh4.s[17]++,null);cov_1hyuj2thh4.s[18]++;if(req.headers[AUTH_HEADER]){cov_1hyuj2thh4.b[0][0]++;cov_1hyuj2thh4.s[19]++;token=req.headers[AUTH_HEADER].match(/(\S+)\s+(\S+)/)[2];// remove 'JWT' prefix
}else{cov_1hyuj2thh4.b[0][1]++;cov_1hyuj2thh4.s[20]++;if(req.cookies){cov_1hyuj2thh4.b[1][0]++;cov_1hyuj2thh4.s[21]++;token=req.cookies['jwt'];}else{cov_1hyuj2thh4.b[1][1]++;}}cov_1hyuj2thh4.s[22]++;return token;};var JwtStrategy=(cov_1hyuj2thh4.s[23]++,_passportJwt["default"].Strategy);var opts=(cov_1hyuj2thh4.s[24]++,{// jwtFromRequest: passportJWT.ExtractJwt.fromAuthHeaderWithScheme("jwt"),
jwtFromRequest:customJWTExtractor,secretOrKey:_security["default"].jwtSecret});cov_1hyuj2thh4.s[25]++;app.use((0,_morgan["default"])('dev'));cov_1hyuj2thh4.s[26]++;app.use((0,_cookieParser["default"])());cov_1hyuj2thh4.s[27]++;app.use(_bodyParser["default"].json({limit:'50mb',extended:true}));cov_1hyuj2thh4.s[28]++;app.use(_bodyParser["default"].urlencoded({limit:'50mb',extended:true}));// init passport
cov_1hyuj2thh4.s[29]++;app.use(_passport["default"].initialize());cov_1hyuj2thh4.s[30]++;_passport["default"].use(new JwtStrategy(opts,/*#__PURE__*/function(){cov_1hyuj2thh4.f[1]++;var _ref=(cov_1hyuj2thh4.s[31]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(jwt_payload,done){cov_1hyuj2thh4.f[2]++;var user;cov_1hyuj2thh4.s[32]++;return _regenerator["default"].wrap(function _callee$(_context){cov_1hyuj2thh4.f[3]++;cov_1hyuj2thh4.s[33]++;while(1){cov_1hyuj2thh4.s[34]++;switch(_context.prev=_context.next){case 0:cov_1hyuj2thh4.b[2][0]++;cov_1hyuj2thh4.s[35]++;_context.prev=0;cov_1hyuj2thh4.s[36]++;_context.next=3;cov_1hyuj2thh4.s[37]++;return _user["default"].getById(jwt_payload.id);case 3:cov_1hyuj2thh4.b[2][1]++;cov_1hyuj2thh4.s[38]++;user=_context.sent;cov_1hyuj2thh4.s[39]++;done(null,user);cov_1hyuj2thh4.s[40]++;_context.next=10;cov_1hyuj2thh4.s[41]++;break;case 7:cov_1hyuj2thh4.b[2][2]++;cov_1hyuj2thh4.s[42]++;_context.prev=7;cov_1hyuj2thh4.s[43]++;_context.t0=_context["catch"](0);cov_1hyuj2thh4.s[44]++;done(null,false,{message:'this JWT is not valid anymore'});case 10:cov_1hyuj2thh4.b[2][3]++;case"end":cov_1hyuj2thh4.b[2][4]++;cov_1hyuj2thh4.s[45]++;return _context.stop();}}},_callee,null,[[0,7]]);})));cov_1hyuj2thh4.s[46]++;return function(_x,_x2){cov_1hyuj2thh4.f[4]++;cov_1hyuj2thh4.s[47]++;return _ref.apply(this,arguments);};}()));cov_1hyuj2thh4.s[48]++;app.use(function(req,res,next){cov_1hyuj2thh4.f[5]++;cov_1hyuj2thh4.s[49]++;res.header('Access-Control-Allow-Credentials',true);cov_1hyuj2thh4.s[50]++;res.header('Access-Control-Allow-Origin',req.headers.origin);cov_1hyuj2thh4.s[51]++;res.header('Access-Control-Allow-Methods','GET,PUT,POST,DELETE');cov_1hyuj2thh4.s[52]++;res.header('Access-Control-Allow-Headers','X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');cov_1hyuj2thh4.s[53]++;next();});var _default=(cov_1hyuj2thh4.s[54]++,app);cov_1hyuj2thh4.s[55]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cHJlc3MtYXBwLmpzIl0sIm5hbWVzIjpbImFwcCIsIkFVVEhfSEVBREVSIiwiY3VzdG9tSldURXh0cmFjdG9yIiwicmVxIiwidG9rZW4iLCJoZWFkZXJzIiwibWF0Y2giLCJjb29raWVzIiwiSnd0U3RyYXRlZ3kiLCJwYXNzcG9ydEpXVCIsIlN0cmF0ZWd5Iiwib3B0cyIsImp3dEZyb21SZXF1ZXN0Iiwic2VjcmV0T3JLZXkiLCJzZWN1cml0eUNvbmZpZyIsImp3dFNlY3JldCIsInVzZSIsImJvZHlQYXJzZXIiLCJqc29uIiwibGltaXQiLCJleHRlbmRlZCIsInVybGVuY29kZWQiLCJwYXNzcG9ydCIsImluaXRpYWxpemUiLCJqd3RfcGF5bG9hZCIsImRvbmUiLCJVc2VyIiwiZ2V0QnlJZCIsImlkIiwidXNlciIsIm1lc3NhZ2UiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwib3JpZ2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBTUEsR0FBRyxHQUFJLDBCQUFiLEMsQ0FHQTs7QUFDQSxJQUFNQyxXQUFXLEdBQUcsZUFBcEI7O0FBRUEsSUFBTUMsa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFxQixDQUFBQyxHQUFHLEVBQUk7QUFDOUIsTUFBSUMsS0FBSyxHQUFHLElBQVo7O0FBRUEsTUFBSUQsR0FBRyxDQUFDRSxPQUFKLENBQVlKLFdBQVosQ0FBSixFQUE4QjtBQUMxQkcsSUFBQUEsS0FBSyxHQUFHRCxHQUFHLENBQUNFLE9BQUosQ0FBWUosV0FBWixFQUF5QkssS0FBekIsQ0FBK0IsZUFBL0IsRUFBZ0QsQ0FBaEQsQ0FBUixDQUQwQixDQUNrQztBQUMvRCxHQUZELE1BRU8sSUFBSUgsR0FBRyxDQUFDSSxPQUFSLEVBQWlCO0FBQ3BCSCxJQUFBQSxLQUFLLEdBQUdELEdBQUcsQ0FBQ0ksT0FBSixDQUFZLEtBQVosQ0FBUjtBQUNIOztBQUVELFNBQU9ILEtBQVA7QUFDSCxDQVZEOztBQWVBLElBQU1JLFdBQVcsR0FBR0Msd0JBQVlDLFFBQWhDO0FBQ0EsSUFBTUMsSUFBSSxHQUFHO0FBQ1Q7QUFDQUMsRUFBQUEsY0FBYyxFQUFFVixrQkFGUDtBQUdUVyxFQUFBQSxXQUFXLEVBQUVDLHFCQUFlQztBQUhuQixDQUFiO0FBT0FmLEdBQUcsQ0FBQ2dCLEdBQUosQ0FBUSx3QkFBTyxLQUFQLENBQVI7QUFDQWhCLEdBQUcsQ0FBQ2dCLEdBQUosQ0FBUSwrQkFBUjtBQUNBaEIsR0FBRyxDQUFDZ0IsR0FBSixDQUFRQyx1QkFBV0MsSUFBWCxDQUFnQjtBQUFDQyxFQUFBQSxLQUFLLEVBQUUsTUFBUjtBQUFnQkMsRUFBQUEsUUFBUSxFQUFFO0FBQTFCLENBQWhCLENBQVI7QUFDQXBCLEdBQUcsQ0FBQ2dCLEdBQUosQ0FBUUMsdUJBQVdJLFVBQVgsQ0FBc0I7QUFBQ0YsRUFBQUEsS0FBSyxFQUFFLE1BQVI7QUFBZ0JDLEVBQUFBLFFBQVEsRUFBRTtBQUExQixDQUF0QixDQUFSLEUsQ0FFQTs7QUFDQXBCLEdBQUcsQ0FBQ2dCLEdBQUosQ0FBUU0scUJBQVNDLFVBQVQsRUFBUjs7QUFDQUQscUJBQVNOLEdBQVQsQ0FBYSxJQUFJUixXQUFKLENBQWdCRyxJQUFoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0JBQXNCLGlCQUFPYSxXQUFQLEVBQW9CQyxJQUFwQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBRVJDLGlCQUFLQyxPQUFMLENBQWFILFdBQVcsQ0FBQ0ksRUFBekIsQ0FGUTs7QUFBQTtBQUVyQkMsWUFBQUEsSUFGcUI7QUFHM0JKLFlBQUFBLElBQUksQ0FBQyxJQUFELEVBQU9JLElBQVAsQ0FBSjtBQUgyQjtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUszQkosWUFBQUEsSUFBSSxDQUFDLElBQUQsRUFBTyxLQUFQLEVBQWM7QUFBRUssY0FBQUEsT0FBTyxFQUFFO0FBQVgsYUFBZCxDQUFKOztBQUwyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUF0Qjs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFiOztBQVVBOUIsR0FBRyxDQUFDZ0IsR0FBSixDQUFRLFVBQUNiLEdBQUQsRUFBTTRCLEdBQU4sRUFBV0MsSUFBWCxFQUFvQjtBQUMxQkQsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsa0NBQVgsRUFBK0MsSUFBL0M7QUFDQUYsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsNkJBQVgsRUFBMEM5QixHQUFHLENBQUNFLE9BQUosQ0FBWTZCLE1BQXREO0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixDQUFXLDhCQUFYLEVBQTJDLHFCQUEzQztBQUNBRixFQUFBQSxHQUFHLENBQUNFLE1BQUosQ0FBVyw4QkFBWCxFQUEyQyxnRUFBM0M7QUFFQUQsRUFBQUEsSUFBSTtBQUNMLENBUEQ7ZUFVZWhDLEciLCJzb3VyY2VSb290IjoiL2hvbWUvZXJ3YW4vRGVza3RvcC9FVE5BL01PQkkvbW9iaV9hcHBsaS9BUEkvc3JjL2NvbmZpZyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzICAgICAgICBmcm9tICdleHByZXNzJztcbmltcG9ydCBwYXNzcG9ydCAgICAgICBmcm9tICdwYXNzcG9ydCc7XG5pbXBvcnQgcGFzc3BvcnRKV1QgICAgZnJvbSAncGFzc3BvcnQtand0JztcbmltcG9ydCBib2R5UGFyc2VyICAgICBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgbG9nZ2VyICAgICAgICAgZnJvbSAnbW9yZ2FuJztcbmltcG9ydCBjb29raWVQYXJzZXIgICBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBwYXRoICAgICAgICAgICBmcm9tICdwYXRoJztcbmltcG9ydCBzZWN1cml0eUNvbmZpZyBmcm9tICcuL3NlY3VyaXR5JztcbmltcG9ydCBVc2VyICAgICAgICAgICBmcm9tICcuLi9tb2RlbHMvdXNlcic7XG5cbmNvbnN0IGFwcFx0ID0gZXhwcmVzcygpO1xuXG5cbi8vIEV4dHJhY3QgSldUIGZyb20gaGVhZGVyIE9SIGNvb2tpZVxuY29uc3QgQVVUSF9IRUFERVIgPSAnYXV0aG9yaXphdGlvbic7XG5cbmNvbnN0IGN1c3RvbUpXVEV4dHJhY3RvciA9IHJlcSA9PiB7XG4gICAgbGV0IHRva2VuID0gbnVsbDtcblxuICAgIGlmIChyZXEuaGVhZGVyc1tBVVRIX0hFQURFUl0pIHtcbiAgICAgICAgdG9rZW4gPSByZXEuaGVhZGVyc1tBVVRIX0hFQURFUl0ubWF0Y2goLyhcXFMrKVxccysoXFxTKykvKVsyXTsgLy8gcmVtb3ZlICdKV1QnIHByZWZpeFxuICAgIH0gZWxzZSBpZiAocmVxLmNvb2tpZXMpIHtcbiAgICAgICAgdG9rZW4gPSByZXEuY29va2llc1snand0J107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuO1xufTtcblxuXG5cblxuY29uc3QgSnd0U3RyYXRlZ3kgPSBwYXNzcG9ydEpXVC5TdHJhdGVneTtcbmNvbnN0IG9wdHMgPSB7XG4gICAgLy8gand0RnJvbVJlcXVlc3Q6IHBhc3Nwb3J0SldULkV4dHJhY3RKd3QuZnJvbUF1dGhIZWFkZXJXaXRoU2NoZW1lKFwiand0XCIpLFxuICAgIGp3dEZyb21SZXF1ZXN0OiBjdXN0b21KV1RFeHRyYWN0b3IsXG4gICAgc2VjcmV0T3JLZXk6IHNlY3VyaXR5Q29uZmlnLmp3dFNlY3JldFxufTtcblxuXG5hcHAudXNlKGxvZ2dlcignZGV2JykpO1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbih7bGltaXQ6ICc1MG1iJywgZXh0ZW5kZWQ6IHRydWV9KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7bGltaXQ6ICc1MG1iJywgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuXG4vLyBpbml0IHBhc3Nwb3J0XG5hcHAudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5wYXNzcG9ydC51c2UobmV3IEp3dFN0cmF0ZWd5KG9wdHMsIGFzeW5jIChqd3RfcGF5bG9hZCwgZG9uZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmdldEJ5SWQoand0X3BheWxvYWQuaWQpO1xuICAgICAgICBkb25lKG51bGwsIHVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBkb25lKG51bGwsIGZhbHNlLCB7IG1lc3NhZ2U6ICd0aGlzIEpXVCBpcyBub3QgdmFsaWQgYW55bW9yZScgfSk7XG4gICAgfVxufSkpO1xuXG5cbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgdHJ1ZSk7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIHJlcS5oZWFkZXJzLm9yaWdpbik7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULFBVVCxQT1NULERFTEVURScpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ1gtUmVxdWVzdGVkLVdpdGgsIFgtSFRUUC1NZXRob2QtT3ZlcnJpZGUsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG5cbiAgbmV4dCgpO1xufSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgYXBwO1xuIl19