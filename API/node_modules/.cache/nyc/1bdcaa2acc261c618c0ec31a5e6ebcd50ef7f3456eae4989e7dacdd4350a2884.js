"use strict";var cov_2qq4350sw8=function(){var path="/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/models/event.js";var hash="b4a29ca8bed966ec5bc8f83ca098663503f0669a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/models/event.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:19},end:{line:5,column:80}},"2":{start:{line:7,column:25},end:{line:7,column:99}},"3":{start:{line:9,column:14},end:{line:9,column:55}},"4":{start:{line:11,column:12},end:{line:11,column:53}},"5":{start:{line:13,column:20},end:{line:13,column:69}},"6":{start:{line:15,column:17},end:{line:15,column:71}},"7":{start:{line:17,column:14},end:{line:17,column:66}},"8":{start:{line:19,column:18},end:{line:19,column:74}},"9":{start:{line:21,column:12},end:{line:301,column:2}},"10":{start:{line:26,column:4},end:{line:26,column:45}},"11":{start:{line:29,column:4},end:{line:29,column:40}},"12":{start:{line:32,column:18},end:{line:61,column:7}},"13":{start:{line:36,column:6},end:{line:60,column:24}},"14":{start:{line:37,column:8},end:{line:59,column:9}},"15":{start:{line:38,column:10},end:{line:58,column:11}},"16":{start:{line:40,column:14},end:{line:40,column:104}},"17":{start:{line:41,column:14},end:{line:41,column:33}},"18":{start:{line:42,column:14},end:{line:42,column:32}},"19":{start:{line:43,column:14},end:{line:43,column:33}},"20":{start:{line:46,column:14},end:{line:48,column:16}},"21":{start:{line:49,column:14},end:{line:49,column:32}},"22":{start:{line:50,column:14},end:{line:50,column:54}},"23":{start:{line:53,column:14},end:{line:53,column:62}},"24":{start:{line:57,column:14},end:{line:57,column:37}},"25":{start:{line:64,column:6},end:{line:64,column:44}},"26":{start:{line:67,column:4},end:{line:67,column:18}},"27":{start:{line:70,column:19},end:{line:89,column:7}},"28":{start:{line:73,column:6},end:{line:88,column:25}},"29":{start:{line:74,column:8},end:{line:87,column:9}},"30":{start:{line:75,column:10},end:{line:86,column:11}},"31":{start:{line:77,column:14},end:{line:77,column:33}},"32":{start:{line:78,column:14},end:{line:78,column:36}},"33":{start:{line:81,column:14},end:{line:81,column:64}},"34":{start:{line:85,column:14},end:{line:85,column:38}},"35":{start:{line:92,column:6},end:{line:92,column:45}},"36":{start:{line:95,column:4},end:{line:95,column:19}},"37":{start:{line:99,column:18},end:{line:124,column:7}},"38":{start:{line:103,column:6},end:{line:123,column:25}},"39":{start:{line:104,column:8},end:{line:122,column:9}},"40":{start:{line:105,column:10},end:{line:121,column:11}},"41":{start:{line:107,column:14},end:{line:107,column:33}},"42":{start:{line:108,column:14},end:{line:110,column:17}},"43":{start:{line:113,column:14},end:{line:113,column:41}},"44":{start:{line:114,column:14},end:{line:116,column:52}},"45":{start:{line:115,column:16},end:{line:115,column:38}},"46":{start:{line:120,column:14},end:{line:120,column:38}},"47":{start:{line:127,column:6},end:{line:127,column:44}},"48":{start:{line:130,column:4},end:{line:130,column:18}},"49":{start:{line:133,column:21},end:{line:166,column:7}},"50":{start:{line:137,column:6},end:{line:165,column:25}},"51":{start:{line:138,column:8},end:{line:164,column:9}},"52":{start:{line:139,column:10},end:{line:163,column:11}},"53":{start:{line:141,column:14},end:{line:141,column:33}},"54":{start:{line:142,column:14},end:{line:142,column:220}},"55":{start:{line:145,column:14},end:{line:145,column:41}},"56":{start:{line:146,column:14},end:{line:148,column:17}},"57":{start:{line:147,column:16},end:{line:147,column:28}},"58":{start:{line:149,column:14},end:{line:149,column:33}},"59":{start:{line:150,column:14},end:{line:152,column:17}},"60":{start:{line:155,column:14},end:{line:155,column:38}},"61":{start:{line:156,column:14},end:{line:158,column:52}},"62":{start:{line:157,column:16},end:{line:157,column:38}},"63":{start:{line:162,column:14},end:{line:162,column:38}},"64":{start:{line:169,column:6},end:{line:169,column:47}},"65":{start:{line:172,column:4},end:{line:172,column:21}},"66":{start:{line:175,column:19},end:{line:209,column:7}},"67":{start:{line:179,column:6},end:{line:208,column:25}},"68":{start:{line:180,column:8},end:{line:207,column:9}},"69":{start:{line:181,column:10},end:{line:206,column:11}},"70":{start:{line:183,column:14},end:{line:183,column:33}},"71":{start:{line:184,column:14},end:{line:188,column:17}},"72":{start:{line:191,column:14},end:{line:191,column:37}},"73":{start:{line:193,column:14},end:{line:196,column:15}},"74":{start:{line:194,column:16},end:{line:194,column:35}},"75":{start:{line:195,column:16},end:{line:195,column:22}},"76":{start:{line:198,column:14},end:{line:198,column:61}},"77":{start:{line:201,column:14},end:{line:201,column:94}},"78":{start:{line:205,column:14},end:{line:205,column:38}},"79":{start:{line:212,column:6},end:{line:212,column:45}},"80":{start:{line:215,column:4},end:{line:215,column:19}},"81":{start:{line:218,column:18},end:{line:249,column:7}},"82":{start:{line:222,column:6},end:{line:248,column:25}},"83":{start:{line:223,column:8},end:{line:247,column:9}},"84":{start:{line:224,column:10},end:{line:246,column:11}},"85":{start:{line:226,column:14},end:{line:226,column:104}},"86":{start:{line:227,column:14},end:{line:227,column:33}},"87":{start:{line:228,column:14},end:{line:228,column:47}},"88":{start:{line:231,column:14},end:{line:231,column:42}},"89":{start:{line:232,column:14},end:{line:232,column:33}},"90":{start:{line:233,column:14},end:{line:237,column:17}},"91":{start:{line:240,column:14},end:{line:240,column:37}},"92":{start:{line:241,column:14},end:{line:241,column:94}},"93":{start:{line:245,column:14},end:{line:245,column:38}},"94":{start:{line:252,column:6},end:{line:252,column:44}},"95":{start:{line:255,column:4},end:{line:255,column:18}},"96":{start:{line:258,column:19},end:{line:293,column:7}},"97":{start:{line:262,column:6},end:{line:292,column:35}},"98":{start:{line:263,column:8},end:{line:291,column:9}},"99":{start:{line:264,column:10},end:{line:290,column:11}},"100":{start:{line:266,column:14},end:{line:266,column:33}},"101":{start:{line:267,column:14},end:{line:267,column:33}},"102":{start:{line:268,column:14},end:{line:272,column:17}},"103":{start:{line:275,column:14},end:{line:275,column:39}},"104":{start:{line:276,column:14},end:{line:276,column:33}},"105":{start:{line:277,column:14},end:{line:277,column:20}},"106":{start:{line:280,column:14},end:{line:280,column:33}},"107":{start:{line:281,column:14},end:{line:281,column:51}},"108":{start:{line:282,column:14},end:{line:282,column:55}},"109":{start:{line:285,column:14},end:{line:285,column:54}},"110":{start:{line:289,column:14},end:{line:289,column:38}},"111":{start:{line:296,column:6},end:{line:296,column:45}},"112":{start:{line:299,column:4},end:{line:299,column:19}},"113":{start:{line:303,column:0},end:{line:303,column:61}}},fnMap:{"0":{name:"user",decl:{start:{line:25,column:17},end:{line:25,column:21}},loc:{start:{line:25,column:24},end:{line:27,column:3}},line:25},"1":{name:"atendees",decl:{start:{line:28,column:21},end:{line:28,column:29}},loc:{start:{line:28,column:32},end:{line:30,column:3}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:10},end:{line:31,column:11}},loc:{start:{line:31,column:22},end:{line:68,column:3}},line:31},"3":{name:"_callee",decl:{start:{line:34,column:42},end:{line:34,column:49}},loc:{start:{line:34,column:56},end:{line:61,column:5}},line:34},"4":{name:"_callee$",decl:{start:{line:36,column:51},end:{line:36,column:59}},loc:{start:{line:36,column:70},end:{line:60,column:7}},line:36},"5":{name:"update",decl:{start:{line:63,column:13},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:65,column:5}},line:63},"6":{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:24},end:{line:96,column:3}},line:69},"7":{name:"_callee2",decl:{start:{line:72,column:42},end:{line:72,column:50}},loc:{start:{line:72,column:53},end:{line:89,column:5}},line:72},"8":{name:"_callee2$",decl:{start:{line:73,column:51},end:{line:73,column:60}},loc:{start:{line:73,column:72},end:{line:88,column:7}},line:73},"9":{name:"_delete",decl:{start:{line:91,column:13},end:{line:91,column:20}},loc:{start:{line:91,column:23},end:{line:93,column:5}},line:91},"10":{name:"(anonymous_10)",decl:{start:{line:98,column:10},end:{line:98,column:11}},loc:{start:{line:98,column:22},end:{line:131,column:3}},line:98},"11":{name:"_callee3",decl:{start:{line:101,column:42},end:{line:101,column:50}},loc:{start:{line:101,column:53},end:{line:124,column:5}},line:101},"12":{name:"_callee3$",decl:{start:{line:103,column:51},end:{line:103,column:60}},loc:{start:{line:103,column:72},end:{line:123,column:7}},line:103},"13":{name:"(anonymous_13)",decl:{start:{line:114,column:62},end:{line:114,column:63}},loc:{start:{line:114,column:79},end:{line:116,column:15}},line:114},"14":{name:"getAll",decl:{start:{line:126,column:13},end:{line:126,column:19}},loc:{start:{line:126,column:22},end:{line:128,column:5}},line:126},"15":{name:"(anonymous_15)",decl:{start:{line:132,column:13},end:{line:132,column:14}},loc:{start:{line:132,column:25},end:{line:173,column:3}},line:132},"16":{name:"_callee4",decl:{start:{line:135,column:42},end:{line:135,column:50}},loc:{start:{line:135,column:60},end:{line:166,column:5}},line:135},"17":{name:"_callee4$",decl:{start:{line:137,column:51},end:{line:137,column:60}},loc:{start:{line:137,column:72},end:{line:165,column:7}},line:137},"18":{name:"(anonymous_18)",decl:{start:{line:146,column:47},end:{line:146,column:48}},loc:{start:{line:146,column:60},end:{line:148,column:15}},line:146},"19":{name:"(anonymous_19)",decl:{start:{line:156,column:59},end:{line:156,column:60}},loc:{start:{line:156,column:76},end:{line:158,column:15}},line:156},"20":{name:"getByUser",decl:{start:{line:168,column:13},end:{line:168,column:22}},loc:{start:{line:168,column:28},end:{line:170,column:5}},line:168},"21":{name:"(anonymous_21)",decl:{start:{line:174,column:11},end:{line:174,column:12}},loc:{start:{line:174,column:23},end:{line:216,column:3}},line:174},"22":{name:"_callee5",decl:{start:{line:177,column:42},end:{line:177,column:50}},loc:{start:{line:177,column:55},end:{line:209,column:5}},line:177},"23":{name:"_callee5$",decl:{start:{line:179,column:51},end:{line:179,column:60}},loc:{start:{line:179,column:72},end:{line:208,column:7}},line:179},"24":{name:"getById",decl:{start:{line:211,column:13},end:{line:211,column:20}},loc:{start:{line:211,column:26},end:{line:213,column:5}},line:211},"25":{name:"(anonymous_25)",decl:{start:{line:217,column:10},end:{line:217,column:11}},loc:{start:{line:217,column:22},end:{line:256,column:3}},line:217},"26":{name:"_callee6",decl:{start:{line:220,column:42},end:{line:220,column:50}},loc:{start:{line:220,column:57},end:{line:249,column:5}},line:220},"27":{name:"_callee6$",decl:{start:{line:222,column:51},end:{line:222,column:60}},loc:{start:{line:222,column:72},end:{line:248,column:7}},line:222},"28":{name:"create",decl:{start:{line:251,column:13},end:{line:251,column:19}},loc:{start:{line:251,column:25},end:{line:253,column:5}},line:251},"29":{name:"(anonymous_29)",decl:{start:{line:257,column:12},end:{line:257,column:13}},loc:{start:{line:257,column:24},end:{line:300,column:3}},line:257},"30":{name:"_callee7",decl:{start:{line:260,column:42},end:{line:260,column:50}},loc:{start:{line:260,column:55},end:{line:293,column:5}},line:260},"31":{name:"_callee7$",decl:{start:{line:262,column:51},end:{line:262,column:60}},loc:{start:{line:262,column:72},end:{line:292,column:7}},line:262},"32":{name:"_delete",decl:{start:{line:295,column:13},end:{line:295,column:20}},loc:{start:{line:295,column:26},end:{line:297,column:5}},line:295}},branchMap:{"0":{loc:{start:{line:38,column:10},end:{line:58,column:11}},type:"switch",locations:[{start:{line:39,column:12},end:{line:43,column:33}},{start:{line:45,column:12},end:{line:50,column:54}},{start:{line:52,column:12},end:{line:53,column:62}},{start:{line:55,column:12},end:{line:55,column:19}},{start:{line:56,column:12},end:{line:57,column:37}}],line:38},"1":{loc:{start:{line:75,column:10},end:{line:86,column:11}},type:"switch",locations:[{start:{line:76,column:12},end:{line:78,column:36}},{start:{line:80,column:12},end:{line:81,column:64}},{start:{line:83,column:12},end:{line:83,column:19}},{start:{line:84,column:12},end:{line:85,column:38}}],line:75},"2":{loc:{start:{line:105,column:10},end:{line:121,column:11}},type:"switch",locations:[{start:{line:106,column:12},end:{line:110,column:17}},{start:{line:112,column:12},end:{line:116,column:52}},{start:{line:118,column:12},end:{line:118,column:19}},{start:{line:119,column:12},end:{line:120,column:38}}],line:105},"3":{loc:{start:{line:139,column:10},end:{line:163,column:11}},type:"switch",locations:[{start:{line:140,column:12},end:{line:142,column:220}},{start:{line:144,column:12},end:{line:152,column:17}},{start:{line:154,column:12},end:{line:158,column:52}},{start:{line:160,column:12},end:{line:160,column:19}},{start:{line:161,column:12},end:{line:162,column:38}}],line:139},"4":{loc:{start:{line:181,column:10},end:{line:206,column:11}},type:"switch",locations:[{start:{line:182,column:12},end:{line:188,column:17}},{start:{line:190,column:12},end:{line:198,column:61}},{start:{line:200,column:12},end:{line:201,column:94}},{start:{line:203,column:12},end:{line:203,column:19}},{start:{line:204,column:12},end:{line:205,column:38}}],line:181},"5":{loc:{start:{line:193,column:14},end:{line:196,column:15}},type:"if",locations:[{start:{line:193,column:14},end:{line:196,column:15}},{start:{line:193,column:14},end:{line:196,column:15}}],line:193},"6":{loc:{start:{line:224,column:10},end:{line:246,column:11}},type:"switch",locations:[{start:{line:225,column:12},end:{line:228,column:47}},{start:{line:230,column:12},end:{line:237,column:17}},{start:{line:239,column:12},end:{line:241,column:94}},{start:{line:243,column:12},end:{line:243,column:19}},{start:{line:244,column:12},end:{line:245,column:38}}],line:224},"7":{loc:{start:{line:264,column:10},end:{line:290,column:11}},type:"switch",locations:[{start:{line:265,column:12},end:{line:272,column:17}},{start:{line:274,column:12},end:{line:277,column:20}},{start:{line:279,column:12},end:{line:282,column:55}},{start:{line:284,column:12},end:{line:285,column:54}},{start:{line:287,column:12},end:{line:287,column:20}},{start:{line:288,column:12},end:{line:289,column:38}}],line:264}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},b:{"0":[0,0,0,0,0],"1":[0,0,0,0],"2":[0,0,0,0],"3":[0,0,0,0,0],"4":[0,0,0,0,0],"5":[0,0],"6":[0,0,0,0,0],"7":[0,0,0,0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"b4a29ca8bed966ec5bc8f83ca098663503f0669a"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_2qq4350sw8.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));var _regenerator=(cov_2qq4350sw8.s[1]++,_interopRequireDefault(require("@babel/runtime/regenerator")));var _asyncToGenerator2=(cov_2qq4350sw8.s[2]++,_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")));var _lodash=(cov_2qq4350sw8.s[3]++,_interopRequireDefault(require("lodash")));var _user=(cov_2qq4350sw8.s[4]++,_interopRequireDefault(require("./user")));var _eventAtendee=(cov_2qq4350sw8.s[5]++,_interopRequireDefault(require("./eventAtendee")));var _bookshelf=(cov_2qq4350sw8.s[6]++,_interopRequireDefault(require("../config/bookshelf")));var _errors=(cov_2qq4350sw8.s[7]++,_interopRequireDefault(require("../helpers/errors")));var _formatters=(cov_2qq4350sw8.s[8]++,_interopRequireDefault(require("../helpers/formatters")));var Event=(cov_2qq4350sw8.s[9]++,_bookshelf["default"].Model.extend({tableName:'event',idAttribute:'id',hidden:[],user:function user(){cov_2qq4350sw8.f[0]++;cov_2qq4350sw8.s[10]++;return this.belongsTo('User','user_id');},atendees:function atendees(){cov_2qq4350sw8.f[1]++;cov_2qq4350sw8.s[11]++;return this.hasMany('EventAtendee');},update:function(){cov_2qq4350sw8.f[2]++;var _update=(cov_2qq4350sw8.s[12]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(body){cov_2qq4350sw8.f[3]++;var realbody;cov_2qq4350sw8.s[13]++;return _regenerator["default"].wrap(function _callee$(_context){cov_2qq4350sw8.f[4]++;cov_2qq4350sw8.s[14]++;while(1){cov_2qq4350sw8.s[15]++;switch(_context.prev=_context.next){case 0:cov_2qq4350sw8.b[0][0]++;cov_2qq4350sw8.s[16]++;realbody=_lodash["default"].pick(body,['name','start','end','user_id','canceled']);cov_2qq4350sw8.s[17]++;this.set(realbody);cov_2qq4350sw8.s[18]++;_context.next=4;cov_2qq4350sw8.s[19]++;return this.save();case 4:cov_2qq4350sw8.b[0][1]++;cov_2qq4350sw8.s[20]++;_context.t0={withRelated:['user','user.role','atendees','atendees.user']};cov_2qq4350sw8.s[21]++;_context.next=7;cov_2qq4350sw8.s[22]++;return _context.sent.fetch(_context.t0);case 7:cov_2qq4350sw8.b[0][2]++;cov_2qq4350sw8.s[23]++;return _context.abrupt("return",_context.sent);case 8:cov_2qq4350sw8.b[0][3]++;case"end":cov_2qq4350sw8.b[0][4]++;cov_2qq4350sw8.s[24]++;return _context.stop();}}},_callee,this);})));function update(_x){cov_2qq4350sw8.f[5]++;cov_2qq4350sw8.s[25]++;return _update.apply(this,arguments);}cov_2qq4350sw8.s[26]++;return update;}(),"delete":function(){cov_2qq4350sw8.f[6]++;var _delete2=(cov_2qq4350sw8.s[27]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(){cov_2qq4350sw8.f[7]++;cov_2qq4350sw8.s[28]++;return _regenerator["default"].wrap(function _callee2$(_context2){cov_2qq4350sw8.f[8]++;cov_2qq4350sw8.s[29]++;while(1){cov_2qq4350sw8.s[30]++;switch(_context2.prev=_context2.next){case 0:cov_2qq4350sw8.b[1][0]++;cov_2qq4350sw8.s[31]++;_context2.next=2;cov_2qq4350sw8.s[32]++;return this.destroy();case 2:cov_2qq4350sw8.b[1][1]++;cov_2qq4350sw8.s[33]++;return _context2.abrupt("return",_context2.sent);case 3:cov_2qq4350sw8.b[1][2]++;case"end":cov_2qq4350sw8.b[1][3]++;cov_2qq4350sw8.s[34]++;return _context2.stop();}}},_callee2,this);})));function _delete(){cov_2qq4350sw8.f[9]++;cov_2qq4350sw8.s[35]++;return _delete2.apply(this,arguments);}cov_2qq4350sw8.s[36]++;return _delete;}()},{getAll:function(){cov_2qq4350sw8.f[10]++;var _getAll=(cov_2qq4350sw8.s[37]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee3(){cov_2qq4350sw8.f[11]++;var eventList;cov_2qq4350sw8.s[38]++;return _regenerator["default"].wrap(function _callee3$(_context3){cov_2qq4350sw8.f[12]++;cov_2qq4350sw8.s[39]++;while(1){cov_2qq4350sw8.s[40]++;switch(_context3.prev=_context3.next){case 0:cov_2qq4350sw8.b[2][0]++;cov_2qq4350sw8.s[41]++;_context3.next=2;cov_2qq4350sw8.s[42]++;return this.query({}).fetchAll({withRelated:['user','user.role','atendees','atendees.user','atendees.user.role']});case 2:cov_2qq4350sw8.b[2][1]++;cov_2qq4350sw8.s[43]++;eventList=_context3.sent;cov_2qq4350sw8.s[44]++;return _context3.abrupt("return",eventList.map(function(event){cov_2qq4350sw8.f[13]++;cov_2qq4350sw8.s[45]++;return event.toJSON();}).map(_formatters["default"].event));case 4:cov_2qq4350sw8.b[2][2]++;case"end":cov_2qq4350sw8.b[2][3]++;cov_2qq4350sw8.s[46]++;return _context3.stop();}}},_callee3,this);})));function getAll(){cov_2qq4350sw8.f[14]++;cov_2qq4350sw8.s[47]++;return _getAll.apply(this,arguments);}cov_2qq4350sw8.s[48]++;return getAll;}(),getByUser:function(){cov_2qq4350sw8.f[15]++;var _getByUser=(cov_2qq4350sw8.s[49]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee4(user_id){cov_2qq4350sw8.f[16]++;var rawResult,userEventsIds,events;cov_2qq4350sw8.s[50]++;return _regenerator["default"].wrap(function _callee4$(_context4){cov_2qq4350sw8.f[17]++;cov_2qq4350sw8.s[51]++;while(1){cov_2qq4350sw8.s[52]++;switch(_context4.prev=_context4.next){case 0:cov_2qq4350sw8.b[3][0]++;cov_2qq4350sw8.s[53]++;_context4.next=2;cov_2qq4350sw8.s[54]++;return _bookshelf["default"].knex.raw("SELECT event.id FROM event LEFT JOIN event_atendees ON event_atendees.event_id = event.id  WHERE event.user_id = ? OR event_atendees.user_id = ?",[user_id,user_id]);case 2:cov_2qq4350sw8.b[3][1]++;cov_2qq4350sw8.s[55]++;rawResult=_context4.sent;cov_2qq4350sw8.s[56]++;userEventsIds=rawResult[0].map(function(o){cov_2qq4350sw8.f[18]++;cov_2qq4350sw8.s[57]++;return o.id;});cov_2qq4350sw8.s[58]++;_context4.next=6;cov_2qq4350sw8.s[59]++;return this.where('id','in',userEventsIds).fetchAll({withRelated:['user','user.role','atendees','atendees.user','atendees.user.role']});case 6:cov_2qq4350sw8.b[3][2]++;cov_2qq4350sw8.s[60]++;events=_context4.sent;cov_2qq4350sw8.s[61]++;return _context4.abrupt("return",events.map(function(event){cov_2qq4350sw8.f[19]++;cov_2qq4350sw8.s[62]++;return event.toJSON();}).map(_formatters["default"].event));case 8:cov_2qq4350sw8.b[3][3]++;case"end":cov_2qq4350sw8.b[3][4]++;cov_2qq4350sw8.s[63]++;return _context4.stop();}}},_callee4,this);})));function getByUser(_x2){cov_2qq4350sw8.f[20]++;cov_2qq4350sw8.s[64]++;return _getByUser.apply(this,arguments);}cov_2qq4350sw8.s[65]++;return getByUser;}(),getById:function(){cov_2qq4350sw8.f[21]++;var _getById=(cov_2qq4350sw8.s[66]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee5(id){cov_2qq4350sw8.f[22]++;var event;cov_2qq4350sw8.s[67]++;return _regenerator["default"].wrap(function _callee5$(_context5){cov_2qq4350sw8.f[23]++;cov_2qq4350sw8.s[68]++;while(1){cov_2qq4350sw8.s[69]++;switch(_context5.prev=_context5.next){case 0:cov_2qq4350sw8.b[4][0]++;cov_2qq4350sw8.s[70]++;_context5.next=2;cov_2qq4350sw8.s[71]++;return this.where({id:id}).fetch({withRelated:['user','user.role','atendees','atendees.user','atendees.user.role']});case 2:cov_2qq4350sw8.b[4][1]++;cov_2qq4350sw8.s[72]++;event=_context5.sent;cov_2qq4350sw8.s[73]++;if(!(event==null)){cov_2qq4350sw8.b[5][0]++;cov_2qq4350sw8.s[74]++;_context5.next=6;cov_2qq4350sw8.s[75]++;break;}else{cov_2qq4350sw8.b[5][1]++;}cov_2qq4350sw8.s[76]++;throw new _errors["default"].EVENT_NOT_FOUND();case 6:cov_2qq4350sw8.b[4][2]++;cov_2qq4350sw8.s[77]++;return _context5.abrupt("return",_formatters["default"].event(event.toJSON()));case 7:cov_2qq4350sw8.b[4][3]++;case"end":cov_2qq4350sw8.b[4][4]++;cov_2qq4350sw8.s[78]++;return _context5.stop();}}},_callee5,this);})));function getById(_x3){cov_2qq4350sw8.f[24]++;cov_2qq4350sw8.s[79]++;return _getById.apply(this,arguments);}cov_2qq4350sw8.s[80]++;return getById;}(),create:function(){cov_2qq4350sw8.f[25]++;var _create=(cov_2qq4350sw8.s[81]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee6(body){cov_2qq4350sw8.f[26]++;var realbody,e,event;cov_2qq4350sw8.s[82]++;return _regenerator["default"].wrap(function _callee6$(_context6){cov_2qq4350sw8.f[27]++;cov_2qq4350sw8.s[83]++;while(1){cov_2qq4350sw8.s[84]++;switch(_context6.prev=_context6.next){case 0:cov_2qq4350sw8.b[6][0]++;cov_2qq4350sw8.s[85]++;realbody=_lodash["default"].pick(body,['name','start','end','user_id','canceled']);cov_2qq4350sw8.s[86]++;_context6.next=3;cov_2qq4350sw8.s[87]++;return new this(realbody).save();case 3:cov_2qq4350sw8.b[6][1]++;cov_2qq4350sw8.s[88]++;e=_context6.sent.toJSON();cov_2qq4350sw8.s[89]++;_context6.next=6;cov_2qq4350sw8.s[90]++;return this.where({id:e.id}).fetch({withRelated:['user','user.role','atendees','atendees.user']});case 6:cov_2qq4350sw8.b[6][2]++;cov_2qq4350sw8.s[91]++;event=_context6.sent;cov_2qq4350sw8.s[92]++;return _context6.abrupt("return",_formatters["default"].event(event.toJSON()));case 8:cov_2qq4350sw8.b[6][3]++;case"end":cov_2qq4350sw8.b[6][4]++;cov_2qq4350sw8.s[93]++;return _context6.stop();}}},_callee6,this);})));function create(_x4){cov_2qq4350sw8.f[28]++;cov_2qq4350sw8.s[94]++;return _create.apply(this,arguments);}cov_2qq4350sw8.s[95]++;return create;}(),"delete":function(){cov_2qq4350sw8.f[29]++;var _delete3=(cov_2qq4350sw8.s[96]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee7(id){cov_2qq4350sw8.f[30]++;var destroy;cov_2qq4350sw8.s[97]++;return _regenerator["default"].wrap(function _callee7$(_context7){cov_2qq4350sw8.f[31]++;cov_2qq4350sw8.s[98]++;while(1){cov_2qq4350sw8.s[99]++;switch(_context7.prev=_context7.next){case 0:cov_2qq4350sw8.b[7][0]++;cov_2qq4350sw8.s[100]++;_context7.prev=0;cov_2qq4350sw8.s[101]++;_context7.next=3;cov_2qq4350sw8.s[102]++;return new this({id:id}).destroy({require:true});case 3:cov_2qq4350sw8.b[7][1]++;cov_2qq4350sw8.s[103]++;destroy=_context7.sent;cov_2qq4350sw8.s[104]++;_context7.next=9;cov_2qq4350sw8.s[105]++;break;case 6:cov_2qq4350sw8.b[7][2]++;cov_2qq4350sw8.s[106]++;_context7.prev=6;cov_2qq4350sw8.s[107]++;_context7.t0=_context7["catch"](0);cov_2qq4350sw8.s[108]++;return _context7.abrupt("return",false);case 9:cov_2qq4350sw8.b[7][3]++;cov_2qq4350sw8.s[109]++;return _context7.abrupt("return",true);case 10:cov_2qq4350sw8.b[7][4]++;case"end":cov_2qq4350sw8.b[7][5]++;cov_2qq4350sw8.s[110]++;return _context7.stop();}}},_callee7,this,[[0,6]]);})));function _delete(_x5){cov_2qq4350sw8.f[32]++;cov_2qq4350sw8.s[111]++;return _delete3.apply(this,arguments);}cov_2qq4350sw8.s[112]++;return _delete;}()}));cov_2qq4350sw8.s[113]++;module.exports=_bookshelf["default"].model('Event',Event);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LmpzIl0sIm5hbWVzIjpbIkV2ZW50IiwiQm9va3NoZWxmIiwiTW9kZWwiLCJleHRlbmQiLCJ0YWJsZU5hbWUiLCJpZEF0dHJpYnV0ZSIsImhpZGRlbiIsInVzZXIiLCJiZWxvbmdzVG8iLCJhdGVuZGVlcyIsImhhc01hbnkiLCJ1cGRhdGUiLCJib2R5IiwicmVhbGJvZHkiLCJfIiwicGljayIsInNldCIsInNhdmUiLCJ3aXRoUmVsYXRlZCIsImZldGNoIiwiZGVzdHJveSIsImdldEFsbCIsInF1ZXJ5IiwiZmV0Y2hBbGwiLCJldmVudExpc3QiLCJtYXAiLCJldmVudCIsInRvSlNPTiIsImZtdCIsImdldEJ5VXNlciIsInVzZXJfaWQiLCJrbmV4IiwicmF3IiwicmF3UmVzdWx0IiwidXNlckV2ZW50c0lkcyIsIm8iLCJpZCIsIndoZXJlIiwiZXZlbnRzIiwiZ2V0QnlJZCIsImVycm9ycyIsIkVWRU5UX05PVF9GT1VORCIsImNyZWF0ZSIsImUiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLElBQUlBLEtBQUssR0FBR0Msc0JBQVVDLEtBQVYsQ0FBZ0JDLE1BQWhCLENBQXVCO0FBQy9CQyxFQUFBQSxTQUFTLEVBQUUsT0FEb0I7QUFFL0JDLEVBQUFBLFdBQVcsRUFBRSxJQUZrQjtBQUcvQkMsRUFBQUEsTUFBTSxFQUFFLEVBSHVCO0FBSy9CQyxFQUFBQSxJQUwrQixrQkFLeEI7QUFDSCxXQUFPLEtBQUtDLFNBQUwsQ0FBZSxNQUFmLEVBQXVCLFNBQXZCLENBQVA7QUFDSCxHQVA4QjtBQVMvQkMsRUFBQUEsUUFUK0Isc0JBU3BCO0FBQ1AsV0FBTyxLQUFLQyxPQUFMLENBQWEsY0FBYixDQUFQO0FBQ0gsR0FYOEI7QUFhekJDLEVBQUFBLE1BYnlCO0FBQUE7QUFBQTtBQUFBLGtEQWFsQkMsSUFia0I7QUFBQTtBQUFBO0FB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QVYsQ0F4Q1o7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxtREEwQ2NTLEVBMUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkE0QzZCLElBQUksSUFBSixDQUFTO0FBQUNBLGdCQUFBQSxFQUFFLEVBQUZBO0FBQUQsZUFBVCxFQUFlaEIsT0FBZixDQUF1QjtBQUFDd0IsZ0JBQUFBLE9BQU8sRUFBRTtBQUFWLGVBQXZCLENBNUM3Qjs7QUFBQTtBQTRDYXhCLGNBQUFBLE9BNUNiO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQSxnREE4Q2dCLEtBOUNoQjs7QUFBQTtBQUFBLGdEQWdEWSxJQWhEWjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLENBdkJTLENBQVo7O0FBMkVBeUIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCN0Msc0JBQVU4QyxLQUFWLENBQWdCLE9BQWhCLEVBQXlCL0MsS0FBekIsQ0FBakIiLCJzb3VyY2VSb290IjoiL2hvbWUvZXJ3YW4vRGVza3RvcC9FVE5BL01PQkkvbW9iaV9hcHBsaS9BUEkvc3JjL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfICAgICAgICAgICAgZnJvbSAnbG9kYXNoJztcbmltcG9ydCBVc2VyICAgICAgICAgZnJvbSAnLi91c2VyJztcbmltcG9ydCBFdmVudEF0ZW5kZWUgZnJvbSAnLi9ldmVudEF0ZW5kZWUnO1xuaW1wb3J0IEJvb2tzaGVsZiAgICBmcm9tICcuLi9jb25maWcvYm9va3NoZWxmJztcbmltcG9ydCBlcnJvcnMgICAgICAgZnJvbSAnLi4vaGVscGVycy9lcnJvcnMnO1xuaW1wb3J0IGZtdCAgICAgICAgICBmcm9tICcuLi9oZWxwZXJzL2Zvcm1hdHRlcnMnO1xuXG52YXIgRXZlbnQgPSBCb29rc2hlbGYuTW9kZWwuZXh0ZW5kKHtcbiAgICB0YWJsZU5hbWU6ICdldmVudCcsXG4gICAgaWRBdHRyaWJ1dGU6ICdpZCcsXG4gICAgaGlkZGVuOiBbXSxcblxuICAgIHVzZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJlbG9uZ3NUbygnVXNlcicsICd1c2VyX2lkJyk7XG4gICAgfSxcblxuICAgIGF0ZW5kZWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNNYW55KCdFdmVudEF0ZW5kZWUnKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgdXBkYXRlKGJvZHkpIHtcbiAgICAgICAgY29uc3QgcmVhbGJvZHkgPSBfLnBpY2soYm9keSwgWyduYW1lJywgJ3N0YXJ0JywgJ2VuZCcsICd1c2VyX2lkJywgJ2NhbmNlbGVkJ10pO1xuXG4gICAgICAgIHRoaXMuc2V0KHJlYWxib2R5KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IChhd2FpdCB0aGlzLnNhdmUoKSkuZmV0Y2goe3dpdGhSZWxhdGVkOiBbJ3VzZXInLCAndXNlci5yb2xlJywgJ2F0ZW5kZWVzJywgJ2F0ZW5kZWVzLnVzZXInXX0pO1xuICAgIH0sXG5cbiAgICBhc3luYyBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlc3Ryb3koKTtcbiAgICB9XG59LCB7XG4gICAgYXN5bmMgZ2V0QWxsKCkge1xuICAgICAgICBjb25zdCBldmVudExpc3QgPSBhd2FpdCB0aGlzLnF1ZXJ5KHt9KS5mZXRjaEFsbCh7d2l0aFJlbGF0ZWQ6IFsndXNlcicsICd1c2VyLnJvbGUnLCAnYXRlbmRlZXMnLCAnYXRlbmRlZXMudXNlcicsICdhdGVuZGVlcy51c2VyLnJvbGUnXX0pO1xuXG4gICAgICAgIHJldHVybiBldmVudExpc3RcbiAgICAgICAgICAgIC5tYXAoZXZlbnQgPT4gZXZlbnQudG9KU09OKCkpXG4gICAgICAgICAgICAubWFwKGZtdC5ldmVudCk7XG4gICAgfSxcblxuICAgIGFzeW5jIGdldEJ5VXNlcih1c2VyX2lkKSB7IC8vIHRoZXJlIG11c3QgYmUgYSBjbGVhbmVyIHdheSB0byBkbyB0aGF0XG4gICAgICAgIGNvbnN0IHJhd1Jlc3VsdCA9IGF3YWl0IEJvb2tzaGVsZi5rbmV4LnJhdyhcbiAgICAgICAgICAgIGBTRUxFQ1QgZXZlbnQuaWQgRlJPTSBldmVudCBMRUZUIEpPSU4gZXZlbnRfYXRlbmRlZXMgT04gZXZlbnRfYXRlbmRlZXMuZXZlbnRfaWQgPSBldmVudC5pZCAgV0hFUkUgZXZlbnQudXNlcl9pZCA9ID8gT1IgZXZlbnRfYXRlbmRlZXMudXNlcl9pZCA9ID9gLFxuICAgICAgICAgICAgW3VzZXJfaWQsIHVzZXJfaWRdXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHVzZXJFdmVudHNJZHMgPSByYXdSZXN1bHRbMF0ubWFwKG8gPT4gby5pZCk7XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXNcbiAgICAgICAgICAgICAgLndoZXJlKCdpZCcsICdpbicsIHVzZXJFdmVudHNJZHMpXG4gICAgICAgICAgICAgIC5mZXRjaEFsbCh7d2l0aFJlbGF0ZWQ6IFsndXNlcicsICd1c2VyLnJvbGUnLCAnYXRlbmRlZXMnLCAnYXRlbmRlZXMudXNlcicsICdhdGVuZGVlcy51c2VyLnJvbGUnXX0pO1xuXG4gICAgICAgIHJldHVybiBldmVudHNcbiAgICAgICAgICAgIC5tYXAoZXZlbnQgPT4gZXZlbnQudG9KU09OKCkpXG4gICAgICAgICAgICAubWFwKGZtdC5ldmVudCk7XG5cbiAgICB9LFxuXG4gICAgYXN5bmMgZ2V0QnlJZChpZCkge1xuICAgICAgICBjb25zdCBldmVudCA9ICBhd2FpdCB0aGlzLndoZXJlKHtpZH0pLmZldGNoKHt3aXRoUmVsYXRlZDogWyd1c2VyJywgJ3VzZXIucm9sZScsICdhdGVuZGVlcycsICdhdGVuZGVlcy51c2VyJywgJ2F0ZW5kZWVzLnVzZXIucm9sZSddfSk7XG5cbiAgICAgICAgaWYgKGV2ZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuRVZFTlRfTk9UX0ZPVU5EKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm10LmV2ZW50KGV2ZW50LnRvSlNPTigpKTtcbiAgICB9LFxuICAgIGFzeW5jIGNyZWF0ZShib2R5KSB7XG4gICAgICAgIGNvbnN0IHJlYWxib2R5ID0gXy5waWNrKGJvZHksIFsnbmFtZScsICdzdGFydCcsICdlbmQnLCAndXNlcl9pZCcsICdjYW5jZWxlZCddKTtcbiAgICAgICAgY29uc3QgZSA9IChhd2FpdCBuZXcgdGhpcyhyZWFsYm9keSkuc2F2ZSgpKS50b0pTT04oKTtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBhd2FpdCB0aGlzLndoZXJlKHtpZDogZS5pZH0pLmZldGNoKHt3aXRoUmVsYXRlZDogWyd1c2VyJywgJ3VzZXIucm9sZScsICdhdGVuZGVlcycsICdhdGVuZGVlcy51c2VyJ119KTtcblxuICAgICAgICByZXR1cm4gZm10LmV2ZW50KGV2ZW50LnRvSlNPTigpKTtcbiAgICB9LFxuICAgIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGRlc3Ryb3kgPSBhd2FpdCBuZXcgdGhpcyh7aWR9KS5kZXN0cm95KHtyZXF1aXJlOiB0cnVlfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBCb29rc2hlbGYubW9kZWwoJ0V2ZW50JywgRXZlbnQpO1xuIl19