{"version":3,"sources":["userEventVisibility.js"],"names":["UserEventVisibility","Bookshelf","Model","extend","tableName","hidden","user","belongsTo","event","visible_users","belongsToMany","visible_groups","destroy","id","require","module","exports","model"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAIA,mBAAmB,GAAGC,sBAAUC,KAAV,CAAgBC,MAAhB,CAAuB;AAC7CC,EAAAA,SAAS,EAAE,uBADkC;AAE7CC,EAAAA,MAAM,EAAE,EAFqC;AAI7CC,EAAAA,IAJ6C,kBAItC;AACH,WAAO,KAAKC,SAAL,CAAe,MAAf,EAAuB,SAAvB,CAAP;AACH,GAN4C;AAQ7CC,EAAAA,KAR6C,mBAQrC;AACJ,WAAO,KAAKD,SAAL,CAAe,OAAf,EAAwB,UAAxB,CAAP;AACH,GAV4C;AAY7CE,EAAAA,aAZ6C,2BAY7B;AACZ,WAAO,KAAKC,aAAL,CAAmB,MAAnB,EAA2B,oBAA3B,CAAP;AACH,GAd4C;AAgB7CC,EAAAA,cAhB6C,4BAgB5B;AACb,WAAO,KAAKD,aAAL,CAAmB,OAAnB,EAA4B,qBAA5B,CAAP;AACH,GAlB4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAqB5B,KAAKE,OAAL,EArB4B;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAvB,EAuBvB;AAAA;AAAA;AAAA;AAAA,mDAEcC,EAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAI6B,IAAI,IAAJ,CAAS;AAACA,gBAAAA,EAAE,EAAFA;AAAD,eAAT,EAAeD,OAAf,CAAuB;AAACE,gBAAAA,OAAO,EAAE;AAAV,eAAvB,CAJ7B;;AAAA;AAIaF,cAAAA,OAJb;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,gDAMgB,KANhB;;AAAA;AAAA,gDAQY,IARZ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAvBuB,CAA1B;;AAmCAG,MAAM,CAACC,OAAP,GAAiBf,sBAAUgB,KAAV,CAAgB,qBAAhB,EAAuCjB,mBAAvC,CAAjB","sourceRoot":"/home/erwan/Desktop/ETNA/MOBI/mobi_appli/API/src/models","sourcesContent":["import _         from 'lodash';\nimport User      from './user';\nimport Event     from './event';\nimport Group     from './group';\nimport Bookshelf from '../config/bookshelf';\nimport errors    from '../helpers/errors';\nimport fmt       from '../helpers/formatters';\n\nvar UserEventVisibility = Bookshelf.Model.extend({\n    tableName: 'user_event_visibility',\n    hidden: [],\n\n    user() {\n        return this.belongsTo('User', 'user_id');\n    },\n\n    event() {\n        return this.belongsTo('Event', 'event_id');\n    },\n\n    visible_users() {\n        return this.belongsToMany('User', 'visible_to_user_id');\n    },\n\n    visible_groups() {\n        return this.belongsToMany('Group', 'visible_to_group_id');\n    },\n\n    async delete() {\n        return await this.destroy();\n    }\n}, {\n\n    async delete(id) {\n        try {\n            var destroy = await new this({id}).destroy({require: true});\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n});\n\nmodule.exports = Bookshelf.model('UserEventVisibility', UserEventVisibility);\n"]}